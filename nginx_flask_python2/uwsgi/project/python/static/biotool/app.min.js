!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.app=t()}}(function(){var t;return function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){function r(t){this.args=o({default_hash:"",debug:!1},t),this.routes={},this.__init__(),this.args.debug&&(this.before_route=function(t){console.log("write function as Router.before_route with state below"),console.log(t)})}var o=t("util")._extend,s=t("url");e.id="Router",e.exports=r,r.prototype.__init__=function(){var t=this;return window.onpopstate=function(e){t.check(e.state)},this},r.prototype["goto"]=function(t){var e,n=t||location.href;return"string"==typeof n&&(e=s.parse(n,!0),n={query:e.query,hash:e.hash?e.hash.replace(/^#/,""):e.hash}),history.state||window.history.replaceState(n,null,window.location.href),(n.hash!=history.state.hash||n.query!=history.state.query)&&window.history.pushState(n,null,s.format(o({pathname:location.pathname},n))),this.check(n),this},r.prototype.check=function(t){return t.hash in this.routes?this.routes[t.hash](t):this.args.default_hash?this.routes[this.args.default_hash](t):alert('We do not have "'+t.hash+'" page!!'),this}},{url:21,util:23}],2:[function(t,e,n){e.id="events_reg";var r=function(t){this.body=t,this.events={},this.attached=[]};e.exports=r,r.prototype.events_han=function(t){var e,n=this.events[t.type];if(n)if("function"==typeof n)n(t);else for(e in n)t.target.matches(e)&&n[e](t)},r.prototype.register=function(){var t,e=this;for(t in this.events)-1==this.attached.indexOf(t)&&(this.body.addEventListener(t,function(t){e.events_han(t)}),this.attached.push(t))},r.prototype.trigger_event=function(t,e){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!1,!0),t.dispatchEvent(n),n}},{}],3:[function(t,e,n){e.exports.ajaxcore=function(t,e){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return n.open(t.method,t.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){n.readyState>3&&200==n.status&&(e.success?e.success(n.responseText):console.log("set success function for xhr.responseText"))},n},e.exports.get=function(t,e){var n=this.ajaxcore({url:t,method:"GET"},e);return n.send(),n},e.exports.post=function(t,e,n){var r=this.ajaxcore({url:t,method:"POST"},n),o="string"==typeof e?e:Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");return r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(o),r},e.id="my_ajax"},{}],4:[function(t,e,n){e.id="mytooltip",t("./stdlib.HTMLElement.js");var r=t("util")._extend,o=function(t,e){this.doms={body:t},this.args=r({},e),this.init()};n.mytooltip=o,o.prototype.init=function(){var t=this;"mytooltip hide".split(/\s+/).map(function(e){t.doms.body.classList.add(e)}),this.doms.body.append_by_array([{name:"div",attr:{"class":"content"}}]),this.doms.content=this.doms.body.querySelector("div.content")},o.prototype.show_pos=function(t,e){var n=this;return Object.keys(t).map(function(e){n.doms.body.style[e]=t[e]}),e&&(n.doms.content.innerHTML="",n.doms.content.append_by_array(e)),n.doms.body.classList.remove("hide"),this},o.prototype.hide=function(){return this.doms.body.classList.add("hide"),this},o.prototype.show_dom=function(t,e,n){var r=t.getBoundingClientRect(),o={top:r.bottom,left:r.right};e&&Object.keys(e).map(function(t){o[t]||(o[t]=0),o[t]=o[t]+e[t]}),this.show_pos(o,n)}},{"./stdlib.HTMLElement.js":7,util:23}],5:[function(t,e,n){function r(t,e){this.args=o({menu:[]},e),this.doms={body:t},this.e_reg=new s(t),this.init_dom(),this.init_event()}var o=t("util")._extend;t("./stdlib.HTMLElement.js");var s=t("./events_reg.js");e.id="navi_bar",e.exports=r,r.prototype.click_handler=function(t){this.active(t),console.log('this tab name is "'+t+'",add click callback by click_handler with def(e)')},r.prototype.init_dom=function(){var t=this;this.doms.body.classList.add("navi_bar"),this.doms.ul=document.createElement("ul"),this.doms.body.appendChild(this.doms.ul),this.doms.items={},this.args.menu.map(function(e){t.add_item(e)})},r.prototype.init_event=function(){var t=this;this.e_reg.events.click={"ul>li>a":function(e){var n=e.target.getAttribute("name");t.click_handler(n)}},this.e_reg.register()},r.prototype.add_item=function(t){var e=Object.keys(t)[0];e in this.doms.items?console.log('"'+e+'" can not be inserted, already exists'):(this.doms.ul.append_by_array([{name:"li",child:[{name:"a",attr:{name:e},child:[t[e]]}]}]),this.doms.items[e]=this.doms.ul.querySelector("[name="+e+"]"))},r.prototype.active=function(t){for(var e in this.doms.items)e==t?this.doms.items[e].classList.add("active"):this.doms.items[e].classList.remove("active");return this}},{"./events_reg.js":2,"./stdlib.HTMLElement.js":7,util:23}],6:[function(t,e,n){e.id="CSSStyleSheet.js",CSSStyleSheet.prototype.css_update=function(t,e){var n,r;for(n=0;n<this.cssRules.length;n++)r=this.cssRules[n],r.selectorText==t&&this.deleteRule(r);return this.insertRule(t+this.css_tostring(e),0),this},CSSStyleSheet.prototype.css_tostring=function(t){return"{"+Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")+"}"}},{}],7:[function(t,e,n){e.id="HTMLElement.js",HTMLElement.prototype.append_by_array=function(t){var e=this;return t.map(function(t){var n;1==t.nodeType?n=t:t.name?(n=document.createElement(t.name),t.attr&&Object.keys(t.attr).map(function(e){n.setAttribute(e,t.attr[e])}),t.child&&t.child.hasOwnProperty("length")?n.append_by_array(t.child):t.html&&(n.innerHTML=t.html)):n=document.createTextNode(t),e.appendChild(n)}),this}},{}],8:[function(t,e,n){e.id="HTMLFormElement.js",mytooltip=t("./mytooltip.js").mytooltip,t("./stdlib.NodeList.js"),t("./stdlib.HTMLSelectElement.js"),HTMLFormElement.prototype.validate_handler=function(t){var e;return e=this.validators[t.target.name],e&&(t.target.setCustomValidity(""),""==t.target.validationMessage&&t.target.setCustomValidity(e(t))),t.target.form.checkValidity()},HTMLFormElement.prototype.validators={},HTMLFormElement.prototype.val=function(t){var e,n=Array.prototype.slice.call(this).reduce(function(t,e){var n=e.getAttribute("name");return-1==t.indexOf(n)&&n&&t.push(n),t},[]),r=this;return n.reduce(function(n,o){return e=t?t[o]||null:null,n[o]=r.elem_val(o,e),n},{})},HTMLFormElement.prototype.elem_val=function(t,e){var n,r=this,o=["[type=checkbox]","select[multiple]"],s=0==o.reduce(function(e,o){return n=r[t].DOCUMENT_NODE?r[t]:r[t][0],e+n.matches(o)},0);return s?(e&&(r[t].value=e),r[t].value):r[t].ind_val(e,"checked")},HTMLFormElement.prototype.safari_validity=function(t,e){var n,r=this;if(!this.tip_obj){var o=document.createElement("span");this.appendChild(o),this.tip_obj=new mytooltip(o)}for(n=0;n<this.length;n++)if(""!=this[n].validationMessage){var s=this[n].getBoundingClientRect().width/2;return console.log(this[n]),this.tip_obj.show_dom(this[n],{left:-s},[this[n].validationMessage]),setTimeout(function(){r.tip_obj.hide()},3e3),!1}return!0}},{"./mytooltip.js":4,"./stdlib.HTMLSelectElement.js":9,"./stdlib.NodeList.js":11}],9:[function(t,e,n){e.id="HTMLSelectElement.js",HTMLSelectElement.prototype.ind_val=function(t){return t?(Array.prototype.slice.call(this.options).map(function(e){e.selected=-1!=t.indexOf(e.value)}),this):Array.prototype.slice.call(this.selectedOptions).map(function(t){return t.value})}},{}],10:[function(t,e,n){e.id="Navigator.js",Navigator.prototype.browser_version=function(){var t,e;return e=this.userAgent.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),e&&null!=(t=this.userAgent.match(/version\/([\.\d]+)/i))&&(e[2]=t[1]),e=e?e.slice(1,3):[this.appName,this.appVersion,"-?"]}},{}],11:[function(t,e,n){e.id="NodeList.js",NodeList.prototype.ind_val=function(t,e){var n=Array.prototype.slice.call(this);return t?(n.map(function(n){n[e]=-1!=t.indexOf(n.value)}),t):n.reduce(function(t,n){return n[e]&&t.push(n.value),t},[])}},{}],12:[function(t,e,n){"use strict";e.id="myform",t("../../lib/stdlib.HTMLElement.js"),t("../../lib/stdlib.HTMLFormElement.js"),t("../../lib/stdlib.Navigator.js"),t("../../lib/stdlib.CSSStyleSheet.js");var r=t("util")._extend,o=t("../../lib/events_reg.js"),s=function(t,e){this.doms={body:t},this.args=r({custom_class:"myform",events:["change"]},e),this.e_reg=new o(t),this.init()};e.exports=s,s.prototype.init=function(){var t=this;if(this.init_view(),this.args.events.map(function(e){t.e_reg.events[e]={}}),this.e_reg.events.submit=function(e){"safari"==navigator.browser_version()[0].toLowerCase()?e.currentTarget.safari_validity(e)&&t.submit_callback(e):t.submit_callback(e),e.preventDefault()},this.e_reg.events.input=function(t){t.currentTarget.validate_handler(t)},!this.args.css){var e=document.createElement("style");document.head.appendChild(e),this.args.css=e.sheet}},s.prototype.init_view=function(){var t=this;this.doms.body.append_by_array([{name:"div",attr:{"class":"form_input"}},{name:"div",attr:{"class":"form_ctrl"},child:["reset","submit"].map(function(t){return{name:"input",attr:{type:t}}})}]),["form_input","form_ctrl"].map(function(e){t.doms[e]=t.doms.body.querySelector("div."+e)}),"myform hide".split(/\s+/).concat([this.args.custom_class]).map(function(e){t.doms.body.classList.add(e)})},s.prototype.add_inputs=function(t){var e,n,r=[],o=t.map(function(t,o){return n=t.label||t.attr.name,e=t.no_label||!n?t:{name:"div",attr:{"class":"field"},child:[t,{name:"label",child:[n]}]},t.hide&&r.push(o),e}),s=this;return this.doms.form_input.append_by_array(o),this.doms.body.classList.remove("hide"),this.css_update(),this.e_reg.register(),r.map(function(t){s.doms.form_input.children[t].classList.add("hide")}),this},s.prototype.css_update=function(){var t,e=this,n={},r={label:"div.field>label",element:"div.field>*:nth-child(1)"};Object.keys(r).map(function(o){t=Array.prototype.slice.call(e.doms.body.querySelectorAll(r[o])),n[o]=Math.max.apply(null,t.map(function(t){return t.getBoundingClientRect().width}))});var o=this.doms.body.getBoundingClientRect().width;return this.args.css.css_update("form."+this.args.custom_class+" div.field>label",{width:n.label}),this.args.css.css_update("form."+this.args.custom_class,{"max-width":n.label+n.element+30}),this.args.css.css_update("form."+this.args.custom_class+" div.field>*:nth-child(1)",{"max-width":o-n.label-40}),this},s.prototype.submit_callback=function(t){console.log(t.target.val())},s.prototype.element_enable=function(t){var e;if("boolean"==typeof t)for(e=0;e<this.doms.body.length;e++)this.doms.body[e].disabled=!t;else if("function"==typeof t)for(e=0;e<this.doms.body.length;e++)this.doms.body[e].disabled=!t(this.doms.body[e]);else console.log("your args is wrong type!!")}},{"../../lib/events_reg.js":2,"../../lib/stdlib.CSSStyleSheet.js":6,"../../lib/stdlib.HTMLElement.js":7,"../../lib/stdlib.HTMLFormElement.js":8,"../../lib/stdlib.Navigator.js":10,util:23}],13:[function(t,e,n){"use strict";t("../../../nodejs/lib/stdlib.HTMLElement.js");var r=t("../../../nodejs/lib/navi_bar.js"),o=t("../../../nodejs/lib/Router.js"),s={taxa:t("./page_taxa.js")},i={ajax:t("../../../nodejs/lib/my_ajax.js"),myform:t("../../../nodejs/static/myform/myform.js")},a={tax_line:"../../taxa/lineage/",tax_krona:"../../taxa/krona/"};e.id="spa";var u=function(t){this.doms={body:t},this.view={},this.router=new o({default_hash:"all"}),this.__init__()};u.prototype.__init__=function(){var t=[{name:"header",child:[{name:"nav"}]},{name:"main"},{name:"footer"}],e=this;this.doms.body.append_by_array(t),this.doms.main=this.doms.body.querySelector("main"),this.view.nav=new r(this.doms.body.querySelector("nav"),{menu:[{taxa:"TAXA"}]});for(var n in s)this.doms.main.append_by_array([{name:"div",attr:{name:n}}]),this.view[n]=new s[n](this.doms.main.querySelector("[name="+n+"]"),{router:this.router,url:a,tools:i});this.router.routes.all=function(t){Array.prototype.slice.apply(e.doms.main.querySelectorAll("main>div")).map(function(t){t.classList.add("hide")}),t.hash in s||(t.hash="taxa"),e.view.nav.active(t.hash),e.view[t.hash].doms.body.classList.remove("hide"),e.view[t.hash].render(t)},this.view.nav.click_handler=function(t){e.router["goto"]({hash:t})}},e.exports=new u(document.body),window.onload=function(){e.exports.router["goto"]()}},{"../../../nodejs/lib/Router.js":1,"../../../nodejs/lib/my_ajax.js":3,"../../../nodejs/lib/navi_bar.js":5,"../../../nodejs/lib/stdlib.HTMLElement.js":7,"../../../nodejs/static/myform/myform.js":12,"./page_taxa.js":14}],14:[function(t,e,n){function r(t,e){this.doms={body:t},this.mod={},this.args=o({dl_files:["html","tsv"]},e),this["var"]={},this.init()}e.id="page_taxa";var o=t("util")._extend;e.exports=r,r.prototype.init=function(){var t=this;return this.doms.body.append_by_array([{name:"h4",child:["upload your table with taxonomy id and their count separate by tab"]},{name:"form",attr:{name:"form_krona"}},{name:"div",attr:{name:"result_krona",style:"display:none"},child:[{name:"span",attr:{name:"krona_res_msg"}},{name:"div",attr:{name:"dl_krona"}}]}]),Array.prototype.slice.apply(this.doms.body.querySelectorAll("[name]")).map(function(e){t.doms[e.getAttribute("name")]=e}),this.mod.form_krona=new this.args.tools.myform(this.doms.form_krona),this.mod.form_krona.add_inputs([{name:"input",attr:{name:"f_tax2count",type:"file",required:"required"},label:"Taxa Table"}]),this.args.dl_files.map(function(e){t.doms.dl_krona.append_by_array([{name:"button",attr:{"class":e}}])}),this.doms.dl_krona.addEventListener("click",function(e){var n=e.target.classList[0];-1!=t.args.dl_files.indexOf(n)&&saveAs(new Blob([t["var"].krona_data[n]],{type:"text/plain;charset=utf-8"}),t["var"].f_tax2count+"."+n)}),this.mod.form_krona.submit_callback=function(e){t["var"].f_tax2count=t.doms.form_krona.f_tax2count.files[0].name;var n,r=new FileReader;r.onload=function(e){n=e.target.result.split("\n").reduce(function(t,e,n){var r=e.split("	");return r.length>1&&(t[r[0]]=r[1]),t},{}),t.args.tools.ajax.post(t.args.url.tax_krona,{tax2count:JSON.stringify(n)},{success:function(e){t.doms.result_krona.style.display="block";var n=JSON.parse(e);n.html.length?(t["var"].krona_data=n,t.doms.dl_krona.style.display="block",t.args.dl_files.map(function(e){t.doms.dl_krona.querySelector("."+e).innerHTML=t["var"].f_tax2count+"."+e}),t.doms.krona_res_msg.innerHTML=n.ex_ids.length+" taxid can not find lineage"):(t.doms.krona_res_msg.innerHTML="no taxid can find their lineage, please check again!",t.doms.dl_krona.style.display="none")}})},r.readAsText(t.doms.form_krona.f_tax2count.files[0],"UTF-8")},this},r.prototype.render=function(t){}},{util:23}],15:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],16:[function(t,e,n){function r(){c=!1,a.length?l=a.concat(l):h=-1,l.length&&o()}function o(){if(!c){var t=setTimeout(r);c=!0;for(var e=l.length;e;){for(a=l,l=[];++h<e;)a[h].run();h=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function i(){}var a,u=e.exports={},l=[],c=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new s(t,e)),1!==l.length||c||setTimeout(o,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],17:[function(e,n,r){(function(e){!function(o){function s(t){throw RangeError(H[t])}function i(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var o=t.split("."),s=i(o,e).join(".");return r+s}function u(t){for(var e,n,r=[],o=0,s=t.length;s>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&s>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function l(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=U(t>>>10&1023|55296),t=56320|1023&t),e+=U(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:x}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?N(t/E):t>>1,t+=N(t/e);t>R*S>>1;r+=x)t=N(t/R);return N(r+(R+1)*t/(t+k))}function f(t){var e,n,r,o,i,a,u,h,f,d,m=[],y=t.length,v=0,g=T,b=L;for(n=t.lastIndexOf(A),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(i=v,a=1,u=x;o>=y&&s("invalid-input"),h=c(t.charCodeAt(o++)),(h>=x||h>N((w-v)/a))&&s("overflow"),v+=h*a,f=b>=u?O:u>=b+S?S:u-b,!(f>h);u+=x)d=x-f,a>N(w/d)&&s("overflow"),a*=d;e=m.length+1,b=p(v-i,e,0==i),N(v/e)>w-g&&s("overflow"),g+=N(v/e),v%=e,m.splice(v++,0,g)}return l(m)}function d(t){var e,n,r,o,i,a,l,c,f,d,m,y,v,g,b,_=[];for(t=u(t),y=t.length,e=T,n=0,i=L,a=0;y>a;++a)m=t[a],128>m&&_.push(U(m));for(r=o=_.length,o&&_.push(A);y>r;){for(l=w,a=0;y>a;++a)m=t[a],m>=e&&l>m&&(l=m);for(v=r+1,l-e>N((w-n)/v)&&s("overflow"),n+=(l-e)*v,e=l,a=0;y>a;++a)if(m=t[a],e>m&&++n>w&&s("overflow"),m==e){for(c=n,f=x;d=i>=f?O:f>=i+S?S:f-i,!(d>c);f+=x)b=c-d,g=x-d,_.push(U(h(d+b%g,0))),c=N(b/g);_.push(U(h(c,0))),i=p(n,v,r==o),n=0,++r}++n,++e}return _.join("")}function m(t){return a(t,function(t){return C.test(t)?f(t.slice(4).toLowerCase()):t})}function y(t){return a(t,function(t){return q.test(t)?"xn--"+d(t):t})}var v="object"==typeof r&&r&&!r.nodeType&&r,g="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof e&&e;(b.global===b||b.window===b||b.self===b)&&(o=b);var _,j,w=2147483647,x=36,O=1,S=26,k=38,E=700,L=72,T=128,A="-",C=/^xn--/,q=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=x-O,N=Math.floor,U=String.fromCharCode;if(_={version:"1.3.2",ucs2:{decode:u,encode:l},decode:f,encode:d,toASCII:y,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return _});else if(v&&g)if(n.exports==v)g.exports=_;else for(j in _)_.hasOwnProperty(j)&&(v[j]=_[j]);else o.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,s){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var a=/\+/g;t=t.split(e);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var h,p,f,d,m=t[c].replace(a,"%20"),y=m.indexOf(n);y>=0?(h=m.substr(0,y),p=m.substr(y+1)):(h=m,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(i,f)?o(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],19:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(i(t),function(i){var a=encodeURIComponent(o(i))+n;return s(t[i])?r(t[i],function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[i]))}).join(e):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],20:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":18,"./encode":19}],21:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&l(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function s(t){return u(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function i(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function h(t){return null==t}var p=t("punycode");n.parse=o,n.resolve=i,n.resolveObject=a,n.format=s,n.Url=r;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],_=255,j=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=f.exec(r);if(o){o=o[0];var s=o.toLowerCase();this.protocol=s,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===r.substr(0,2);!i||o&&O[o]||(r=r.substr(2),this.slashes=!0)}if(!O[o]&&(i||o&&!S[o])){for(var a=-1,l=0;l<b.length;l++){var c=r.indexOf(b[l]);-1!==c&&(-1===a||a>c)&&(a=c)}var h,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(h=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(h)),a=-1;for(var l=0;l<g.length;l++){var c=r.indexOf(g[l]);-1!==c&&(-1===a||a>c)&&(a=c)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),l=0,E=y.length;E>l;l++){var L=y[l];if(L&&!L.match(j)){for(var T="",A=0,C=L.length;C>A;A++)T+=L.charCodeAt(A)>127?"x":L[A];if(!T.match(j)){var q=y.slice(0,l),M=y.slice(l+1),H=L.match(w);H&&(q.push(H[1]),M.unshift(H[2])),M.length&&(r="/"+M.join(".")+r),this.hostname=q.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var R=this.hostname.split("."),N=[],l=0;l<R.length;++l){var U=R[l];N.push(U.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(U):U)}this.hostname=N.join(".")}var z=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+z,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[s])for(var l=0,E=v.length;E>l;l++){var F=v[l],D=encodeURIComponent(F);D===F&&(D=escape(F)),r=r.split(F).join(D)}var P=r.indexOf("#");-1!==P&&(this.hash=r.substr(P),r=r.slice(0,P));var B=r.indexOf("?");if(-1!==B?(this.search=r.substr(B),this.query=r.substr(B+1),e&&(this.query=k.parse(this.query)),r=r.slice(0,B)):e&&(this.search="",this.query={}),r&&(this.pathname=r),S[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",U=this.search||"";this.path=z+U}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(s=k.stringify(this.query));var i=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),i=i.replace("#","%23"),e+o+n+i+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||O[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var s=n.pathname||"",i=n.search||"";n.path=s+i}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=l||a||n.host&&t.pathname,f=p,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!S[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),p=p&&(""===o[0]||""===d[0])),l)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(m){n.hostname=n.host=d.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=d.slice(-1)[0],g=(n.host||t.host)&&("."===v||".."===v)||""===v,b=0,_=d.length;_>=0;_--)v=d[_],"."==v?d.splice(_,1):".."===v?(d.splice(_,1),b++):b&&(d.splice(_,1),b--);if(!p&&!f)for(;b--;b)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var j=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=j?"":d.length?d.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return p=p||n.host&&d.length,p&&!j&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:17,querystring:20}],22:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],23:[function(t,e,n){(function(e,r){function o(t,e){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(e)?r.showHidden=e:e&&n._extend(r,e),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),u(r,t,r.depth)}function s(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function i(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&k(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return b(o)||(o=u(t,o,r)),o}var s=l(t,e);if(s)return s;var i=Object.keys(e),m=a(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),S(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return c(e);if(0===i.length){if(k(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(O(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return c(e)}var v="",g=!1,_=["{","}"];if(d(e)&&(g=!0,_=["[","]"]),k(e)){var j=e.name?": "+e.name:"";v=" [Function"+j+"]"}if(w(e)&&(v=" "+RegExp.prototype.toString.call(e)),O(e)&&(v=" "+Date.prototype.toUTCString.call(e)),S(e)&&(v=" "+c(e)),0===i.length&&(!g||0==e.length))return _[0]+v+_[1];if(0>r)return w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var x;return x=g?h(t,e,r,m,i):i.map(function(n){return p(t,e,r,m,n,g)}),t.seen.pop(),f(x,v,_)}function l(t,e){if(j(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o){for(var s=[],i=0,a=e.length;a>i;++i)C(e,String(i))?s.push(p(t,e,n,r,String(i),!0)):s.push("");return o.forEach(function(o){o.match(/^\d+$/)||s.push(p(t,e,n,r,o,!0))}),s}function p(t,e,n,r,o,s){var i,a,l;if(l=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),C(r,o)||(i="["+o+"]"),a||(t.seen.indexOf(l.value)<0?(a=y(n)?u(t,l.value,null):u(t,l.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),j(i)){if(s&&o.match(/^\d+$/))return a;i=JSON.stringify(""+o),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=t.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=t.stylize(i,"string"))}return i+": "+a}function f(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function g(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function j(t){return void 0===t}function w(t){return x(t)&&"[object RegExp]"===L(t)}function x(t){return"object"==typeof t&&null!==t}function O(t){return x(t)&&"[object Date]"===L(t)}function S(t){return x(t)&&("[object Error]"===L(t)||t instanceof Error)}function k(t){return"function"==typeof t}function E(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t;
}function L(t){return Object.prototype.toString.call(t)}function T(t){return 10>t?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var q=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,s=r.length,i=String(t).replace(q,function(t){if("%%"===t)return"%";if(n>=s)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];s>n;a=r[++n])i+=y(a)||!x(a)?" "+a:" "+o(a);return i},n.deprecate=function(t,o){function s(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return t.apply(this,arguments)}if(j(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var i=!1;return s};var M,H={};n.debuglog=function(t){if(j(M)&&(M=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!H[t])if(new RegExp("\\b"+t+"\\b","i").test(M)){var r=e.pid;H[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else H[t]=function(){};return H[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=g,n.isString=b,n.isSymbol=_,n.isUndefined=j,n.isRegExp=w,n.isObject=x,n.isDate=O,n.isError=S,n.isFunction=k,n.isPrimitive=E,n.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":22,_process:16,inherits:15}]},{},[13])(13)});
